<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>list</title>
<link rel="stylesheet" type="text/css" href="../css/reset.css">
<link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.min.css">
<link href="../css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../css/style6.css" />
<!-- <link href="../css/style.css" rel="stylesheet"> -->
<link rel="stylesheet" type="text/css" href="../css/common.css">
<link rel="stylesheet" type="text/css" href="../css/list17.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="../css/animate-custom.css" />
<link rel="stylesheet" type="text/css" href="../css/dialog.css">
<!-- <link rel="stylesheet" type="text/css" href="../css/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.css" /> -->

<!-- <script src="//code.jquery.com/jquery-1.11.0.min.js"></script> -->
<script src="../bower_components/jquery/dist/jquery.js"></script>
<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../js/bootstrap.min.js"></script>
<script src="../js/popupsettings.js"></script>
<script src="../js/dialog.js"></script>
<style>
#wrapper {
  position: absolute;
  width: 500px !important;
  height: auto !important;
  top: 90%;
  left: 1%;
}
red {
   color: red;
}
blue {
   color: blue;
}
.assohint {
   cursor: pointer;
   color: red;   
}
.assomean {
   cursor: pointer;
   color: blue;   
}
.assotext {
   cursor: pointer;
}

.favorOn {
	display: inline-block;
  overflow: hidden;
  width: 40px;
  height: 40px!important;
  margin: -1px 0 1px;
  background: url("../images/favorite.jpg") no-repeat -210px -42px;
  font-size: 0;
  line-height: 0!important;
  text-indent: -9000px;
}
.favorOff {
	display: inline-block;
  overflow: hidden;
  width: 40px;
  height: 40px!important;
  margin: -1px 0 1px;
  background: url("../images/favorite.jpg") no-repeat -290px -42px;
  font-size: 0;
  line-height: 0!important;
  text-indent: -9000px;
}
.card1 {
	background-color: white;
	width: 200px;
	height: 200px;
}
.thumbnail {
  position: absolute;
  border-radius : 50%;
 /*
  left:50%;
  margin: -170px -200px 0 200px; */
}
.change {
	right: 5% !important;
}

#signinpop {
	position: absolute;
	top: 50%;
	left: 50%;
	margin: -277px 0 0 75px;
	line-height: 1;
}

#settings {
    height: 690px;
}

#delete {
    height: 324px;
}

.change_link {
	margin-top: 75px;
}

h1, .h3 {
    margin-top: 0;
    margin-bottom: 0;
}

label, .h3 {
	  font-size: 100%;
    font: inherit;
}

</style>


  </head>
  <body>
  
<div id="d1">
   <span id="threediv">
   <nav>
       <ul>
          <li><a href="../add/addasso.html" class="newfile-btn"><i></i><img src="../images/newfile.png" width="70"/><br></br><font size='3'>연상법 등록</font></a></li>
          <li><a href="../learn/learnchoice.html" class="study-btn"><i></i><img src="../images/pencil.png" width="70"/><br></br><font size='3'>연상법 학습</font></a></li>
          <li><a href="../myword/myword.html" class="profile-btn"><i></i><img src="../images/bookicon.png" width="80"/><br></br><font size='3'>나의 단어장</font></a></li>

       </ul>
    </nav>
    </span>
   <div id="logodiv" align="center"><a href="../main/main.html"><img src="../images/logo.png" id="logo"/></a></div>
   <div id="topsearchdiv" align="center">
   <form method="get" action="../list/list.html">
   <input id="topsearch" name="word" type="text" value="search"  onfocus="this.value=''" onblur="if(this.value =='') this.value='search';"/>
   </form>
   </div>
   
   
   <video autoplay loop poster="../images/strip.jpg" id="bgvid">
     <source src="../images/search_back.mp4" type="video/mp4">
    </video>
</div>

<div id="d2" class="container">
   <div id="resultword" align="right"></div>
   <div id="resultmean" align="left"></div>
   <div id="enrolldiv" align="center">
 		 <img data-toggle="modal" href="#myModal" src="../images/enroll.jpg" alt="signin" />
   </div>
   <div class="contain_box">
      <div class="container">
        <div class="row">
        </div>
        
        <div class="row 2nd">

        </div>
      </div>
    </div>
    <!-- first modal -->
    <form method="post" name="modalForm" id="modalForm" >
    <div class="modal" id="myModal" aria-hidden="true" style="display: none; z-index: 1050;">
       
       <div class="modal-dialog modal-lg add-modal-dialog">
          <div class="modal-content add-modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                     </button>
                    <h4 class="modal-title" id="exampleModalLabel">연상법 등록하기</h4>
            </div><div class="container"></div>
            <div class="modal-body">
              
					      <div class="form-group">
					         <fieldset>
					            <select name="mean" id="Means">
					               
					              
					            </select>
					         </fieldset>
					      </div>
					      
					      <div class="form-group">
					         <textarea class="form-control" id="message-text" placeholder="연상법"></textarea>
					      </div>
					      <div class="form-group" id="imgArea">       
					        <img id="as_imgPreview" src="" alt="이곳에 선택된 이미지가 표시됩니다."> 
					        <input id="inputFile" type="file" name="photo"></input>
					      </div>
            </div>
            
            <div class="modal-footer add-modal-footer">
              <wrapper id="wrapper" class="add-wrapper">
              <p class="change_link">
              	<a id="btn_submit" data-toggle="modal" href="#myModal2" class="to_register" onclick="changeValue()">다음</a>
              </p>
              </wrapper>
            </div>
          </div>
        </div>
    </div>
    <!-- second modal -->
    <div class="modal" id="myModal2" aria-hidden="true" style="display: none; z-index: 1060;">
       <div class="popup addpopup">
       <div class="modal-dialog modal-lg">
          <div class="modal-content second-content add-second-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h4 class="modal-title" id="exampleModalLabel"><font size="6">힌트가 되는 뜻 부분 체크</font></h4>
            </div><div class="container"></div>
            <div class="modal-body">
            <div id="assos">
            
            </div>
            
            </div>
            <div class="modal-footer">
              <wrapper id=wrapper class="add-wrapper" style="top:270px">
	              <p class="login button addbutton">
	              	<input type="submit" class="submitbtn" id="assoaddbtn" value="확인"/>
	              </p>
              <wrapper>
            </div>
          </div>
        </div>
    </div>
</div>
</form>
</div>
<!-- --------------------------------------------------------------------------------------------------------------------------------- -->
<!-- first modal EDIT Asso -->
    <form method="post" name="modalForm" id="EditAsso-modalForm" >
    <div class="modal" id="EditAsso-myModal" aria-hidden="true" style="display: none; z-index: 1050;">
       
       <div class="modal-dialog modal-lg add-modal-dialog">
          <div class="modal-content add-modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                     </button>
                    <h4 class="modal-title" id="exampleModalLabel">연상법 수정</h4>
            </div><div class="container"></div>
            <div class="modal-body">
              
					      <div class="form-group">
					         <fieldset>
					            <select name="mean" id="EditAsso-Means">
					               
					              
					            </select>
					         </fieldset>
					      </div>
					      
					      <div class="form-group">
					         <textarea class="form-control" id="EditAsso-message-text" placeholder="연상법"></textarea>
					      </div>
					      <div class="form-group" id="EditAsso-imgArea">       
					        <img id="EditAsso-as_imgPreview" src="" alt="이곳에 선택된 이미지가 표시됩니다."> 
					        <input id="EditAsso-inputFile" type="file" name="photo"></input>
					      </div>
            </div>
            
            <div class="modal-footer add-modal-footer">
              <wrapper id="wrapper" class="add-wrapper">
              <p class="change_link">
              	<a id="btn_submit" data-toggle="modal" href="#EditAsso-myModal2" class="to_register" onclick="editAssochangeValue()">다음</a>
              </p>
              </wrapper>
            </div>
          </div>
        </div>
    </div>
    <!-- second modal -->
    <div class="modal" id="EditAsso-myModal2" aria-hidden="true" style="display: none; z-index: 1060;">
       <div class="popup addpopup">
       <div class="modal-dialog modal-lg">
          <div class="modal-content second-content add-second-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
              <h4 class="modal-title" id="exampleModalLabel"><font size="6">힌트가 되는 뜻 부분 체크</font></h4>
            </div><div class="container"></div>
            <div class="modal-body">
            <div id="EditAsso-assos">
            
            </div>
            
            </div>
            <div class="modal-footer">
              <wrapper id=wrapper class="add-wrapper" style="top:270px">
	              <p class="login button addbutton">
	              	<input type="submit" class="submitbtn" id="assoaddbtn" value="수정"/>
	              </p>
              <wrapper>
            </div>
          </div>
        </div>
    </div>
</div>
</form>
</div>
<!-- --------------------------------------------------------------------------------------------------------------------------------- -->
<div id="d3">
   <div class="line" align="center"><img src="../images/line.jpg" alt="line" /></div>
   <ul id="list">
   </ul>
</div>

<!-- 설정 팝업! -->
	
	
	<div class="modal" id="setting" aria-hidden="true"
		style="display: none; z-index: 1050;">
		<span id="signinpop">
			<div class="modal-dialog modal-lg">

				<div class="modal-body">
					<section>
						<div id="container_demo">
							<!-- hidden anchor to stop jump http://www.css3create.com/Astuce-Empecher-le-scroll-avec-l-utilisation-de-target#wrap4  -->
							<a class="hiddenanchor" id="tosettings"></a>
							<a class="hiddenanchor" id="todelete"></a>
							<div id="wrapper" class="set-wrapper">
								
								<div id="settings" class="animate form">
									
									<form id="settingForm" name="mysetting" autocomplete="on" method='post'>
									<div id=pAndndiv>
										<!-- <img src="../images/profile.png" id="imgPreview" class="settingpro" width="100" height="100">
										<h5 align="center">김현지  <input id="inputfiles" type="file" name="photo"></input><img class="cameraimg" src="../images/cameraicon.png" width="30" height="30"></h5><br> -->
									</div>
										<h1></h1>
										
									     	<p>
											<label for="useremail" class="youmail" data-icon="e">이메일</label>
											<input id="setemail" name="email" required="required" type="text" readonly="readonly"/>
										</p>
										
										<p>
											<label for="username" class="uname" data-icon="u">닉네임 변경</label>
											<input id="nickCheck" name="nickCheck" type="hidden"/>
											<input id="nickBefore" name="nickBefore" type="hidden"/>
											
											<input id="setnick" name="nick" required="required" type="text"/>
											    <font name="ncheck" size="2" color="red"></font> <br>
										</p>
										
										<p>
											<label for="password" class="youpasswd" data-icon="p">비밀번호 변경</label>
											<input id="localpassword" name="password" required="required" type="password"
											    placeholder="기존 비밀번호" />
											
										</p>
										
										<p>
											<input id="setpassword" name="password"  required="required" type="password"
											    placeholder="새 비밀번호" />
											<font name="prcheck" size="2" color="red"></font> <br>
										</p>
										
										<p>
											<input id="setpassword_confirm" name="password" required="required" type="password"
											    placeholder="새 비밀번호 확인" />
											    <font name="pcheck" size="2" color="red"></font> 
										</p>
									<p class="change_link delete_link" style="margin-top: 80px;">
										<a href="#todelete" class="to_register" style="width:78px;">회원탈퇴 </a>
									</p>
									<p class="change button">
										<input  id="change" class="change" name="changebtn" value="변경" style="text-align:center;" readonly />
									</p>
									</form>
							</div>
							
							
							<div id="delete" class="animate form">
									<form name="deletecheck" autocomplete="on">
										<h1>회원탈퇴</h1>
										<p>
											<label for="deletepassword" class="youpasswd" data-icon="p">본인 확인을 위하여 비밀번호를 입력해 주세요</label> 
											<input id="mailCheck" name="mailCheck" type="hidden"/>
												<input id="deletepassword" name="deletepassword"
												required="required" type="password"/>
										</p>
										<p class="delete button">
											<input id="deletebtn" class="change" value="탈퇴" style="text-align:center;" readonly/>
										</p>
										<p class="change_link">
											<a href="#tosettings" class="to_register">설정</a>
										</p>
									</form>
								</div>
							</div>
						</div>
					</section>
				</div>
			</div>
		</span>
	</div>


<script>
loadPhoto();
function loadPhoto() {
	$.getJSON("../ajax/member/list.do", function(result) {
		var headerdiv = $('#d1');
		var pAndndiv = $('#pAndndiv');
		var list = result.list;
		
		$("<div class='menubar'>").html("<ul>" + 
				"<li><a href='#' id='current'><div class='mypage'><div class='imgdiv'><img class='thumbnail' src='" + list[0].photo + "' width='45' height='45'></div><div class='name' id='memberNick'><font size='3'>" + list[0].nick + "</font></div></div></a>" + 
				"<ul><li><a href='location:;'>받은좋아요 <img src='../images/mainlikewhite.png' width='20px' height='20px'><font align='right'> &nbsp;&nbsp;&nbsp;&nbsp;"+ result.totLikes +"</font></a></li>" + 
				"<li><a data-toggle=\"modal\" href='#setting'>설정</a></li><li><a href='../auth/logout.do'>로그아웃</a></li></ul>" +
				"</li></ul>").appendTo(headerdiv);
		$('#sign').css("display", "none");
		
		$("<img src='" + list[0].photo + "' id='imgPreview' class='settingpro' width='100' height='100'>" +
			"<h3 class='h3' align='center'>" + list[0].nick + "<input id='inputfiles' type='file' name='photo'></input><img class='cameraimg' src='../images/cameraicon.png' width='30' height='30'></h3><br>").appendTo(pAndndiv);
	})
}
</script>


<script type="text/javascript">
        $(function() {
            $("#inputFile").on('change', function(){
                readURL(this);
            });
        });
        $(function() {
            $("#EditAsso-inputFile").on('change', function(){
                readURL(this);
            });
        });

        function readURL(input) {
            if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
            	$('#as_imgPreview').attr('src', e.target.result);    
            	$('#EditAsso-as_imgPreview').attr('src', e.target.result);
                }

              reader.readAsDataURL(input.files[0]);
            }
        }

</script>

<script>
  $("#modalForm").submit(function(event) {   
	   event.preventDefault();
	   var tagAssos = document.getElementById("assos").innerHTML;
	   $("<input type='hidden' name='asso' value='" + tagAssos + "'>").html("").appendTo("#assos");
	   $("<input type='hidden' name='hint' value='" + tagAssos + "'>").html("").appendTo("#assos");	  
	   var fd = new FormData($(this)[0]);
     $.ajax({
    	 	 url:"../ajax/searchList/add.do",
    	 	 type:"POST",
    	 	 data: fd,
    	 	 async:true,
    	 	 cache:false,
    	 	 contentType:false,
    	 	 processData:false,
         success: function(data) {
     			 window.location.reload();
         }
       });
     return false;
  	 });
</script>
<script>
/*------------------------------------------------------------------------------------------------------*/
 function strip_tag (str)
 {
	    return str.replace(/(<([^>]+)>)/ig,"");
	}
 
function assoEdit(i) {
	console.log(i);
	$.ajax({
		  type: 'POST',
		  url: "../ajax/searchList/list.do",
		  data:  {
			  word : getParameter("word")
			},
		  success: function(result) {
			  var editAsso = document.getElementById("EditAsso-message-text");
   			  var list = result.list;
   			  var word = getParameter("word");
   			  console.log("ano => "+list[i].ano);
   			  console.log(list[i].assothumPath);
   			  editAsso.innerHTML = strip_tag(list[i].asso);
   			  document.getElementById("EditAsso-as_imgPreview").setAttribute( 'src', list[i].assothumPath);
   			  $("<input type='hidden' name='word' value='" + word + "'>").html("").appendTo("#EditAsso-message-text");
   			  $("<input type='hidden' name='ano' value='" + list[i].ano + "'>").html("").appendTo("#EditAsso-message-text");
			},
		  dataType: "json",
		  async:false
		});
}
/*------------------------------------------------------------------------------------------------------*/
  $("#EditAsso-modalForm").submit(function(event) {   
	   event.preventDefault();
	   var tagAssos = document.getElementById("EditAsso-assos").innerHTML;   
	   console.log(tagAssos);
	   $("<input type='hidden' name='asso' value='" + tagAssos + "'>").html("").appendTo("#EditAsso-assos");
	   $("<input type='hidden' name='hint' value='" + tagAssos + "'>").html("").appendTo("#EditAsso-assos");	  
	   var fd = new FormData($(this)[0]);
	   console.log(fd);
     $.ajax({
    	 	 url:"../ajax/searchList/assoUpdate.do",
    	 	 type:"POST",
    	 	 data: fd,
    	 	 async:true,
    	 	 cache:false,
    	 	 contentType:false,
    	 	 processData:false,
         success: function(data) {
     			 window.location.reload();
         }
       });
     return false;
  	 });
</script>
<script type= "text/javascript">
       function changeValue(){
         var divAssos = document.getElementById("assos");
         var divAssos2 = document.getElementById("message-text").value.split("");
         var asso = ""; 
         for (var i = 0; i < divAssos2.length; i++) {
           asso += "<span id='text" + i + "' onClick='changeValue2(" + i + ")' class='assotext' data-index='" + i + "'>";
           asso += divAssos2[i];  
           asso += "</span>";
           asso += "";       
         };
         divAssos.innerHTML = asso;
       }
       function editAssochangeValue(){
           var divAssos = document.getElementById("EditAsso-assos");
           var divAssos2 = document.getElementById("EditAsso-message-text").value.split("");
           var asso = ""; 
           for (var i = 0; i < divAssos2.length; i++) {
             asso += "<span id='text" + i + "' onClick='changeValue2(" + i + ")' class='assotext' data-index='" + i + "'>";
             asso += divAssos2[i];  
             asso += "</span>";
             asso += "";       
           };
           divAssos.innerHTML = asso;
         }
</script>
<script type= "text/javascript">
  function changeValue2(index){		
	  $(document).ready(function () {	  	
			document.getElementById("text"+index).setAttribute( 'class', 'assohint');
			document.getElementById("text"+index).setAttribute( 'onClick', 'changeValue3(' + index + ')');
      });	  
    }
</script>
<script type= "text/javascript">
  function changeValue3(index){		
	  $(document).ready(function () {	  	
			document.getElementById("text"+index).setAttribute( 'class', 'assomean');
			document.getElementById("text"+index).setAttribute( 'onClick','changeValue4(' + index + ')');	  	
      });	  
    }
</script>
<script type= "text/javascript">
  function changeValue4(index){		
	  $(document).ready(function () {	  	
			document.getElementById("text"+index).setAttribute( 'class', 'assotext');
			document.getElementById("text"+index).setAttribute( 'onClick','changeValue2(' + index + ')');	  	
      });	  
    }
</script>
<script>
var getParameter = function (param) {
	var returnValue;
	var url = location.href;
	var parameters = (url.slice(url.indexOf('?') + 1, url.length)).split('&');
	for (var i = 0; i < parameters.length; i++) {
		var varName = parameters[i].split('=')[0];
		if (varName.toUpperCase() == param.toUpperCase()) {
			returnValue = parameters[i].split('=')[1];
			return decodeURIComponent(returnValue);
		}
	}
};
</script>
<script>
loadMean();
function loadMean() {
	$.getJSON("http://localhost:3000/parseword?word=" + getParameter('word'), function (result) {

	$("<font size='15'>").html(result[0].word).appendTo("#resultword");
     var divMeans1 = document.getElementById("Means");
     var editAssoMeans = document.getElementById("EditAsso-Means");
     var divMeans3 = "<option selected='selected' id='MeansOption'>뜻</option>"; 
	
     for (i=1; i < result.length; i++) {
		$("<font size='4'>").html(result[i].mean + " &nbsp").appendTo("#resultmean");
		if(result.length == 2) {
			divMeans3 += "<option>" + result[i].mean + "</option>";
			divMeans1.innerHTML = divMeans3;
			editAssoMeans.innerHTML = divMeans3;
		} else {
         divMeans3 += "<option>" + result[i].mean.substring(2, result[i].mean.length) + "</option>";                   
         divMeans1.innerHTML = divMeans3;
         editAssoMeans.innerHTML = divMeans3;
		}
	}
	  $.get("../ajax/searchList/wordList.do", {
			      word: result[0].word			      
			    }, function(results) {
			      if (results.status == "success") {
			    	  console.log(result[0].word + "는 DB에 있다");			    	  
			      } else {
			    	  console.log(result[0].word + "는 DB에 없다");
			    	  wordAdd(result[0].word);
			    	  wordMeanAdd(result[0].word);
			      }
			    }, "json"	  
			  );
	loadAsso(result[0].word);
	});
}
</script>
<script>
function wordAdd(word) {
	 $(document).ready(function () {
		  $.get("../ajax/searchList/wordAdd.do", {
		      word: word
		    }, function(result) {
		      if (result.status == "success") {
		    	 console.log(word);
		      } else {
		        /* window.alert("단어 등록 실패입니다!"); */
		      }
		      
		    }, "json"	  
		  );
	 		});
		}
</script>
<script>
function wordMeanAdd(word) {
		$.getJSON("http://localhost:3000/parseword?word=" + getParameter('word'), function (result) {
		if (result.length == 2) { 
			for (i=1; i < result.length; i++) {			
				 $.get("../ajax/searchList/wordMeanAdd.do", {
			      word: word,
			      mean: result[i].mean		      
			    }, function(result) {
			      if (result.status == "success") {		    	  
			    	  /* window.alert("단어뜻 등록 성공입니다!"); */		    	  
			      } else {
			        /* window.alert("단어뜻 등록 실패입니다!"); */
			      }
			    }, "json"	  
			  );}
		} else {
			for (i=1; i < result.length; i++) {			
			 $.get("../ajax/searchList/wordMeanAdd.do", {
		      word: word,
		      mean: result[i].mean.substring(2, result[i].mean.length)		      
		    }, function(result) {
		      if (result.status == "success") {		    	  
		    	  /* window.alert("단어뜻 등록 성공입니다!"); */		    	  
		      } else {
		        /* window.alert("단어뜻 등록 실패입니다!"); */
		      }
		    }, "json"	  
		  );}} // for문 끝
		
		});
		}
</script>
<script>
function assoDelete(index) {	
	$(document).ready(function () {
		$.getJSON("../ajax/searchList/list.do?word=" + $("#wordTo").val(), function (result) {
			var list = result.list;
		 $.post("../ajax/searchList/assoDelete.do", { 
			 ano : list[index].ano	      
		    }, function(results) {
		      if (results.status == "success") { 	
			    	  console.log("삭제성공");
			    	  window.location.reload();
			    	  			      } else {
			    	  			    	console.log("삭제 실패");			    	  
			    	  			      }
			    }, "json"	  
		      );
				 });		      
	});}
function likePlus(index) {	
	$(document).ready(function () {	
		$.getJSON("../ajax/searchList/list.do?word=" + $("#wordTo").val(), function (result) {
			var list = result.list;
		 $.get("../ajax/searchList/likeOrHate.do", { 
			 ano : list[index].ano		      
		    }, function(results) {
		      if (results.status == "success") { 	
				$.get("../ajax/searchList/likesUpdate.do", { 
					ano : list[index].ano			      
			    }, function(results) {
			      if (results.status == "success") {			    	  
			    	  console.log("좋아요++");
			    	  var like = $("#likeNo"+index);
			    	  like.html($("#likeNo"+index).text() * 1  + 1).appendTo(like); 
			    	  
			      } else {
			    	  console.log("실패다");
			      }
			    }, "json"	  
		      );
				 }		      
		    else {
		    	  $.dialog({

                      // 'alert', 'confirm', 'info' or 'tips'
                      type : 'alert',     
                      titleText : '이미 "좋아요" 하신 연상법 입니다.',
                      showTitle : true,
                      contentHtml : '',
                      dialogClass : '',
                      autoClose : 0,
                      overlayClose : false,
                      drag : false,

                      buttonText : {
                          ok : 'OK',
                          cancel : 'Cancel',
                          delete : 'Delete'
                      },
                      buttonClass : {
                          ok : '',
                          cancel : '',
                          delete : ''
                      },
                      infoText : '',      // working in info type
                      infoIcon : '',      // working in info type

                      onClickOk : function(){},
                      onClickCancel : function(){},
                      onClickClose : function(){},

                      onBeforeShow : function(){},
                      onShow : function(){},
                      onBeforeClosed : function(){},
                      onClosed : function(){}
                      
                    });
		    	}},"json" 
		    );}
	 );});
	}
function hatePlus(index) {	
	$(document).ready(function () {
		$.getJSON("../ajax/searchList/list.do?word=" + $("#wordTo").val(), function (result) {
			var list = result.list;
		 $.get("../ajax/searchList/likeOrHate.do", { 
			 ano : list[index].ano	      
		    }, function(results) {
		      if (results.status == "success") { 	
				$.get("../ajax/searchList/hatesUpdate.do", {
					ano : list[index].ano		      
			    }, function(results) {
			      if (results.status == "success") {			    	  
			    	  console.log("싫어요++");
			    	  var hate = $("#hateNo"+index);
			    	  hate.html($("#hateNo"+index).text() * 1  + 1).appendTo(hate);
			      } else {
			    	  console.log("실패다");
			      }
			    }, "json"	  
		      );
				 }		      
		    else {
		    	  $.dialog({

                      // 'alert', 'confirm', 'info' or 'tips'
                      type : 'alert',     
                      titleText : '이미 "싫어요" 하신 연상법 입니다.',
                      showTitle : true,
                      contentHtml : '',
                      dialogClass : '',
                      autoClose : 0,
                      overlayClose : false,
                      drag : false,

                      buttonText : {
                          ok : 'OK',
                          cancel : 'Cancel',
                          delete : 'Delete'
                      },
                      buttonClass : {
                          ok : '',
                          cancel : '',
                          delete : ''
                      },

                      infoText : '',      // working in info type
                      infoIcon : '',      // working in info type

                      onClickOk : function(){},
                      onClickCancel : function(){},
                      onClickClose : function(){},

                      onBeforeShow : function(){},
                      onShow : function(){},
                      onBeforeClosed : function(){},
                      onClosed : function(){}
                      
                    });
		    	}},"json" 
		    );}
	 );});
	}	
	
	
	
</script>
<script>
function loadAsso(word) {
	$("<input type='hidden' id='wordTo' name='word' value='" + word + "'>").html("").appendTo("#myModal");
	/* $.getJSON("../ajax/searchList/list.do?word=" + word, function (result) {
		var ul = $("#list");
		var list = result.list;
		if (list[0] == null) {
			$("<div id='noword' align='center'>").html("<font face='나눔스퀘어'><h3>해당하는 연상법이 없습니다.</h3></font></div>").appendTo(ul);
		} else {
			  for (var i in list) {
				  $("<li>").html("<span class='nic' align='left'><strong>" + list[i].nick + "</strong></span>" +
					"<span class='date'>" + list[i].date + "</span>" +
					"<span class='word'><h3><strong>" + list[i].word + "</strong></h3></span>" +
					"<span class='mean'>" + list[i].mean + "</span>" +
					"<span class='weeks'><h4><strong id='asso" + i + "'>" + list[i].asso + "</strong></h4></span>" +
					"<span class='num'><h4 id='likeNo" + i + "'>" + list[i].likeNo + "</h4></span>" +
					"<span class='num2'><h4 id='hateNo" + i + "'>" + list[i].hateNo + "</h4></span>" +
					"<span class='cracker'><img src='" + list[i].assothumPath + "' alt='' width='165px'/></span>" +
					"<span class='profile'><img src='../images/profile.png' alt='profile' width='85px'/></span>" +
					"<span class='star'><a href='javascript:;' class='favor" + i + "' onclick='favorChange(" + i + ")'></a></span>" +
					"<span class='like'><img onclick='likePlus(" + i + ")' src='../images/like.png' alt='like' width='30px'/></span>" +
					"<span class='hate'><img onclick='hatePlus(" + i + ")' src='../images/hate.png' alt='hate' width='30px' /></span>" +
					"<div class='line2' align='center'><img  src='../images/line.jpg' alt='line' /></div>")
					.appendTo(ul);
	
				  setFavor(i);
			  }
		}
	}); */
	$.ajax({
		  type: 'POST',
		  url: "../ajax/searchList/list.do",
		  data:  {
			  word : word
			},
		  success: function(result) {
			  var ul = $("#list");
			  var memberNick = $("#memberNick").text();
				var list = result.list;
				if (list[0] == null) {
					$("<div id='noword' align='center'>").html("<font face='나눔스퀘어'><h3>해당하는 연상법이 없습니다.</h3></font></div>").appendTo(ul);
				} else {
					  for (var i in list) {
						  if (list[i].nick == memberNick) {
						  $("<li>").html("<span class='nic' align='left'><strong>" + list[i].nick + "</strong></span>" +
							"<span class='date'>" + list[i].date + "</span>" +
							"<span class='word'><h3><strong>" + list[i].word + "</strong></h3></span>" +
							"<span class='mean'>" + list[i].mean + "</span>" +
							"<span class='weeks'><h4><strong id='asso" + i + "'>" + list[i].asso + "</strong></h4></span>" +
							"<span class='num'><h4 id='likeNo" + i + "'>" + list[i].likeNo + "</h4></span>" +
							"<span class='num2'><h4 id='hateNo" + i + "'>" + list[i].hateNo + "</h4></span>" +
							"<span class='cracker'><img src='" + list[i].assothumPath + "' alt='' width='165px'/></span>" +
							"<span class='profile'><img src='" + list[i].prophotPath + "' alt='profile' width='85px' style='border-radius:100%;'/></span>" +
							"<span class='star'><a href='javascript:;' class='favor" + i + "' onclick='favorChange(" + i + ")'></a></span>" +
							"<span class='like'><img onclick='likePlus(" + i + ")' src='../images/like.png' alt='like' width='30px'/></span>" +
							"<span class='hate'><img onclick='hatePlus(" + i + ")' src='../images/hate.png' alt='hate' width='30px' /></span>" +
							"<span class='assoDelete'><img onclick='assoDelete(" + i + ")' src='../images/delete.png' alt='delete' width='30px'/></span>" +
							"<span class='assoEdit'><img data-toggle='modal' href='#EditAsso-myModal' onclick='assoEdit(" +  i + ")' src='../images/assoEdit.png' alt='assoEdit' width='30px'/></span>" +
							"<div class='line2' align='center'><img  src='../images/line.jpg' alt='line' /></div>")
							.appendTo(ul);
						  } else {
							  $("<li>").html("<span class='nic' align='left'><strong>" + list[i].nick + "</strong></span>" +
										"<span class='date'>" + list[i].date + "</span>" +
										"<span class='word'><h3><strong>" + list[i].word + "</strong></h3></span>" +
										"<span class='mean'>" + list[i].mean + "</span>" +
										"<span class='weeks'><h4><strong id='asso" + i + "'>" + list[i].asso + "</strong></h4></span>" +
										"<span class='num'><h4 id='likeNo" + i + "'>" + list[i].likeNo + "</h4></span>" +
										"<span class='num2'><h4 id='hateNo" + i + "'>" + list[i].hateNo + "</h4></span>" +
										"<span class='cracker'><img src='" + list[i].assothumPath + "' alt='' width='165px'/></span>" +
										"<span class='profile'><img src='" + list[i].prophotPath + "' alt='profile' width='85px' style='border-radius:100%;'/></span>" +
										"<span class='star'><a href='javascript:;' class='favor" + i + "' onclick='favorChange(" + i + ")'></a></span>" +
										"<span class='like'><img onclick='likePlus(" + i + ")' src='../images/like.png' alt='like' width='30px'/></span>" +
										"<span class='hate'><img onclick='hatePlus(" + i + ")' src='../images/hate.png' alt='hate' width='30px' /></span>" +
										"<div class='line2' align='center'><img  src='../images/line.jpg' alt='line' /></div>")
										.appendTo(ul);  
						  }
						  setFavor(i);
					  }
				}
			},
		  dataType: "json",
		  async:false
		});
}

function setFavor(index) {
	$(document).ready(function () {
 		$.getJSON("../ajax/searchList/list.do?word=" + $("#wordTo").val(), function (result) {
			var list = result.list;
			
			$.post("../ajax/myWord/exist.do", {
				ano : list[index].ano
			}, function(result) {
				if (result.exist) {
					$("a.favor" + index).addClass("favorOn");
				} else {
					$("a.favor" + index).addClass("favorOff");
				}
			});
		});
	});
}
function favorChange(index) {
	$(document).ready(function () {
		$.getJSON("../ajax/searchList/list.do?word=" + $("#wordTo").val(), function (result) {
			var list = result.list;
			console.log("즐겨찾기 추가")
	 		if($("a.favor" + index).hasClass("favorOff")) {
				$.post("../ajax/myWord/add.do", {
					ano : list[index].ano
				}, function(result) {
					$("a.favor" + index).removeClass("favorOff");
					$("a.favor" + index).addClass("favorOn");
				});
			
			} else {
				$.post("../ajax/myWord/delete.do", {
					ano : list[index].ano
				}, function(result) {
					$("a.favor" + index).removeClass("favorOn");
					$("a.favor" + index).addClass("favorOff");
				});
			}
	 	});
	});
}
</script>
  </body>
  </html>
